/**
 * /*
 *  B’sWhyteFalcon
 *	Assignment  3
 *	Ben Reynolds – 13309656
 *	Conor Whyte -   13324911
 *	Eoin Falconer -   13331016
 *
 *  @author B'sWhyteFalcon
 */
import java.util.regex.Pattern;

public class Scrabble {
	


	public static void main(String[] args) throws NullPointerException, RankOutOfBoundsException, VectorFullException {
		
		Board b = new Board();
		b.populateBoard();
		final Pattern SPACE = Pattern.compile(" ");
		
		UI ui = new UI();
		
		Pool newPool = new Pool() ;
		newPool.populateNewPool();
		System.out.println(ui.newGameMessage());
		Player p = new Player(ui.getName());
		Player p2 = new Player(ui.getName());
		
		Frame playerOneFrame = new Frame(p);					
		playerOneFrame.refillFrame(newPool);							
		
		Frame playerTwoFrame = new Frame(p2);					
		playerTwoFrame.refillFrame(newPool);
		
		
		System.out.println(ui.displayScoreNameAndFrame(p.playerid, p.getScore(), playerOneFrame.displayFrame()));
		System.out.println(ui.displayScoreNameAndFrame(p2.playerid, p2.getScore(), playerTwoFrame.displayFrame()));

		b.displayBoard();
		
		System.out.println("\n" + ui.promptPlayer(p, p2)); 
		String splitInput[] = new String[10];
		String genericInputString = ui.takeGenericInput();
		splitInput = SPACE.split(genericInputString);
		String check = ui.checkInput(genericInputString);

		if(splitInput[0].equals("exchange")) {	
			for(int i = 0; i < splitInput[1].length(); i++) {
				    char ch = splitInput[1].charAt(i);				// takes in a letter from the user to be replaced in the frame
					
				    if( ui.controlGameFlow % 2 == 0)
					{
						playerOneFrame.moveTileToPool(ch, newPool);		// puts chosen letter back into the pool
						playerOneFrame.refillFrame(newPool);
						System.out.println("Your new frame is" + playerOneFrame.displayFrame());
					}
				    else {
				    	playerTwoFrame.moveTileToPool(ch, newPool);		// puts chosen letter back into the pool
						playerTwoFrame.refillFrame(newPool);
						playerTwoFrame.displayFrame();
						System.out.println("Your new frame is" + playerTwoFrame.displayFrame());
				    }
				    
			}
		}
		else if(check.equals("placeonboard")) {
			if(ui.controlGameFlow % 2 == 0){
				if(b.isEmpty()){
					b.firstWordInCentre(splitInput[0], splitInput[1], splitInput[2]);
				}
				b.isPlacedInBoard(splitInput[0], splitInput[1], splitInput[2]); //chooseword, position, axis
				b.checkWordIsLegal(splitInput[0], splitInput[1], splitInput[2]);
				b.insertOnBoard(splitInput[0], splitInput[1], splitInput[2], playerOneFrame);
				playerOneFrame.refillFrame(newPool);
				System.out.println(playerOneFrame.displayFrame());
				b.displayBoard();
			}
			else{
				if(b.isEmpty()){
					b.firstWordInCentre(splitInput[0], splitInput[1], splitInput[2]);
				}
				b.isPlacedInBoard(splitInput[0], splitInput[1], splitInput[2]);
				b.checkWordIsLegal(splitInput[0], splitInput[1], splitInput[2]);
				b.insertOnBoard(splitInput[0], splitInput[1], splitInput[2], playerOneFrame);
				playerTwoFrame.refillFrame(newPool);
				System.out.println(playerTwoFrame.displayFrame());
				b.displayBoard();
			}
		}
		
		System.out.println(ui.promptPlayer(p, p2));
		
		
		
	
	}

}
